# Cron jobs for Switch Scores

# Data ingestion
0 4 * * * www-data cd /var/www/switchscores.com && php artisan DSNintendoCoUkImportParseLink >/dev/null 2>&1
10 4 * * * www-data cd /var/www/switchscores.com && php artisan DSNintendoCoUkUpdateAvailability >/dev/null 2>&1
15 4 * * * www-data cd /var/www/switchscores.com && php artisan DSNintendoCoUkUpdateGames >/dev/null 2>&1
20 4 * * * www-data cd /var/www/switchscores.com && php artisan DSNintendoCoUkDownloadPackshots >/dev/null 2>&1

# Review pipeline
30 4 * * * www-data cd /var/www/switchscores.com && php artisan PartnerImportActiveFeeds >/dev/null 2>&1
35 4 * * * www-data cd /var/www/switchscores.com && php artisan ReviewImportByScraper >/dev/null 2>&1
40 4 * * * www-data cd /var/www/switchscores.com && php artisan PartnerParseReviewDrafts >/dev/null 2>&1
45 4 * * * www-data cd /var/www/switchscores.com && php artisan ReviewConvertDraftsToReviews >/dev/null 2>&1
47 4 * * * www-data cd /var/www/switchscores.com && php artisan UpdateGameCalendarStats >/dev/null 2>&1
50 4 * * * www-data cd /var/www/switchscores.com && php artisan ReviewSiteUpdateStats >/dev/null 2>&1
52 4 * * * www-data cd /var/www/switchscores.com && php artisan UpdateGameReviewStats >/dev/null 2>&1
54 4 * * * www-data cd /var/www/switchscores.com && php artisan UpdateGameRanks >/dev/null 2>&1

# Content
0 5 * * * www-data cd /var/www/switchscores.com && php artisan SitemapGenerate >/dev/null 2>&1
5 5 * * * www-data cd /var/www/switchscores.com && php artisan IGSeriesImage >/dev/null 2>&1
10 5 * * * www-data cd /var/www/switchscores.com && php artisan ReviewCampaignUpdateProgress >/dev/null 2>&1
15 5 * * * www-data cd /var/www/switchscores.com && php artisan RefreshNewsDbUpdateStats >/dev/null 2>&1

# Quality and integrity
30 5 * * * www-data cd /var/www/switchscores.com && php artisan GameUpdateQualityScores >/dev/null 2>&1
35 5 * * * www-data cd /var/www/switchscores.com && php artisan IntegrityCheckChecker >/dev/null 2>&1

# GSC
0 6 * * * www-data cd /var/www/switchscores.com && php artisan app:fetch-gsc-page-snapshots >/dev/null 2>&1

# URL crawl - check Nintendo URLs for 404s (100 games/night, ~5 min runtime)
30 6 * * * www-data cd /var/www/switchscores.com && php artisan game:crawl-batch --limit=100 --delay=3 >/dev/null 2>&1
