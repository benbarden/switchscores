<script>

    var formMode = '{{ FormMode }}';
    var formVals = [];

    var feedItemGameId = '{{ FeedItemData.id }}';

    if (formMode == 'edit') {

        // This is used when editing existing items.
        formVals['game_id'] = "{{ FeedItemData.game_id }}";
        formVals['status_code'] = "{{ FeedItemData.status_code }}";

    } else {

        // This is used for new items.
        // It's also used when submitting the edit version, to avoid the DB data overwriting the form.
        formVals['game_id'] = "{{ old('game_id') }}";
        formVals['status_code'] = "{{ old('status_code') }}";

    }

    $('#game_id').val(formVals['game_id']);
    $('#status_code').val(formVals['status_code']);

    $('#game_id').select2();

    $('.btn-quick-status').on('click', function() {
        quickStatusElemId = $(this).attr('id');
        quickStatusId = quickStatusElemId.replace('btn-quick-status-', '');
        if (quickStatusId == '') {
            return false;
        }

        $.getJSON('/api/admin/feed-item-game/update-status', {itemId: feedItemGameId, newStatusId: quickStatusId}, function(data) {
            apiMessage = data.message;
            console.log(apiMessage);
            top.location.href = '{{ route('admin.feed-items.games.list') }}';
            //$('#link_title').val(linkText);
        });
    });

</script>
