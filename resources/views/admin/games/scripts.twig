<script>
    var formMode = '{{ FormMode }}';
    var formVals = [];

    if (formMode == 'edit') {

        // This is used when editing existing games.
        formVals['title'] = "{{ GameData.title|replace({'\"': '\\"', '&quot;': '\\"'})|raw }}";
        formVals['link_title'] = "{{ GameData.link_title }}";
        formVals['release_date'] = "{{ GameData.release_date }}";
        formVals['price_eshop'] = "{{ GameData.price_eshop }}";
        formVals['players'] = "{{ GameData.players }}";
        formVals['upcoming_date'] = "{{ GameData.upcoming_date }}";
        formVals['overview'] = "{{ GameData.overview|replace({'\"': '\\"', '&quot;': '\\"'})|raw }}";
        formVals['upcoming'] = "{{ GameData.upcoming }}";
        formVals['developer'] = "{{ GameData.developer|replace({'\"': '\\"', '&quot;': '\\"'})|raw }}";
        formVals['publisher'] = "{{ GameData.publisher|replace({'\"': '\\"', '&quot;': '\\"'})|raw }}";
        formVals['amazon_uk_link'] = "{{ GameData.amazon_uk_link }}";
        formVals['video_url'] = "{{ GameData.video_url }}";

    } else {

        // This is used for new games.
        // It's also used when submitting the edit version, to avoid the DB data overwriting the form.
        formVals['title'] = "{{ old('title')|replace({'\"': '\\"', '&quot;': '\\"'})|raw }}";
        formVals['link_title'] = "{{ old('link_title') }}";
        formVals['release_date'] = "{{ old('release_date') }}";
        formVals['price_eshop'] = "{{ old('price_eshop') }}";
        formVals['players'] = "{{ old('players') }}";
        formVals['upcoming_date'] = "{{ old('upcoming_date') }}";
        formVals['overview'] = "{{ old('overview')|replace({'\"': '\\"', '&quot;': '\\"'})|raw }}";
        formVals['upcoming'] = "{{ old('upcoming') }}";
        formVals['developer'] = "{{ old('developer')|replace({'\"': '\\"', '&quot;': '\\"'})|raw }}";
        formVals['publisher'] = "{{ old('publisher')|replace({'\"': '\\"', '&quot;': '\\"'})|raw }}";
        formVals['amazon_uk_link'] = "{{ old('amazon_uk_link') }}";
        formVals['video_url'] = "{{ old('video_url') }}";

    }

    $('#title').val(formVals['title']);
    $('#link_title').val(formVals['link_title']);
    $('#release_date').val(formVals['release_date']);
    $('#price_eshop').val(formVals['price_eshop']);
    $('#players').val(formVals['players']);
    $('#upcoming_date').val(formVals['upcoming_date']);
    $('#overview').val(formVals['overview']);
    $('#developer').val(formVals['developer']);
    $('#publisher').val(formVals['publisher']);
    if (formVals['upcoming'] == 1) {
        $('#upcoming').attr('checked', true);
    }
    $('#amazon_uk_link').val(formVals['amazon_uk_link']);
    $('#video_url').val(formVals['video_url']);

    // Genres
    {% if GameGenreList %}
    {% for item in GameGenreList %}
        $('#genre_item_{{ item.genre_id }}').attr('checked', true);
    {% endfor %}
    {% endif %}

</script>
