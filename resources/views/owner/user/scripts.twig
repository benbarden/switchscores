<script>

    var formMode = '{{ FormMode }}';
    var formVals = [];

    if (formMode == 'edit') {

        // This is used when editing existing records.
        formVals['display_name'] = "{{ UserData.display_name }}";
        formVals['email'] = "{{ UserData.email }}";
        formVals['twitter_user_id'] = "{{ UserData.twitter_user_id }}";
        formVals['partner_id'] = "{{ UserData.partner_id }}";
        formVals['is_staff'] = "{{ UserData.is_staff }}";
        formVals['is_developer'] = "{{ UserData.is_developer }}";

    } else {

        // This is used for new records.
        // It's also used when submitting the edit version, to avoid the DB data overwriting the form.
        formVals['display_name'] = "{{ old('display_name') }}";
        formVals['email'] = "{{ old('email') }}";
        formVals['twitter_user_id'] = "{{ old('twitter_user_id') }}";
        formVals['partner_id'] = "{{ old('partner_id') }}";
        formVals['is_staff'] = "{{ old('is_staff') }}";
        formVals['is_developer'] = "{{ old('is_developer') }}";

    }

    $('#display_name').val(formVals['display_name']);
    $('#email').val(formVals['email']);
    $('#twitter_user_id').val(formVals['twitter_user_id']);
    $('#partner_id').val(formVals['partner_id']);
    if (formVals['is_staff'] == '1') {
        $('#is_staff').attr('checked', true);
    } else {
        $('#is_staff').attr('checked', false);
    }
    if (formVals['is_developer'] == '1') {
        $('#is_developer').attr('checked', true);
    } else {
        $('#is_developer').attr('checked', false);
    }

    // Roles
    {% if UserRoleList %}
    {% for item in UserRoleList %}
        $('#role_item_{{ item.id }}').attr('checked', true);
    {% endfor %}
    {% endif %}

</script>
