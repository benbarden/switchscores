<script>

    var formMode = '{{ FormMode }}';
    var formVals = [];

    if (formMode == 'edit') {

        // This is used when editing existing records.
        formVals['name'] = "{{ ReviewSiteData.name }}";
        formVals['link_title'] = "{{ ReviewSiteData.link_title }}";
        formVals['website_url'] = "{{ ReviewSiteData.website_url }}";
        formVals['twitter_id'] = "{{ ReviewSiteData.twitter_id }}";
        formVals['contact_name'] = "{{ ReviewSiteData.contact_name }}";
        formVals['contact_email'] = "{{ ReviewSiteData.contact_email }}";
        formVals['contact_form_link'] = "{{ ReviewSiteData.contact_form_link }}";
        formVals['rating_scale'] = "{{ ReviewSiteData.rating_scale }}";
        formVals['feed_url'] = "{{ ReviewSiteData.feed_url|e('js') }}";
        formVals['feed_url_prefix'] = "{{ ReviewSiteData.feed_url_prefix }}";
        formVals['title_match_rule_pattern'] = "{{ ReviewSiteData.title_match_rule_pattern|e('js') }}";
        formVals['title_match_index'] = "{{ ReviewSiteData.title_match_index }}";
        formVals['allow_historic_content'] = "{{ ReviewSiteData.allow_historic_content }}";
        formVals['status'] = "{{ ReviewSiteData.status }}";

    } else {

        // This is used for new records.
        // It's also used when submitting the edit version, to avoid the DB data overwriting the form.
        formVals['name'] = "{{ old('name') }}";
        formVals['link_title'] = "{{ old('link_title') }}";
        formVals['website_url'] = "{{ old('website_url') }}";
        formVals['twitter_id'] = "{{ old('twitter_id') }}";
        formVals['contact_name'] = "{{ old('contact_name') }}";
        formVals['contact_email'] = "{{ old('contact_email') }}";
        formVals['contact_form_link'] = "{{ old('contact_form_link') }}";
        formVals['rating_scale'] = "{{ old('rating_scale') }}";
        formVals['feed_url'] = "{{ old('feed_url')|e('js') }}";
        formVals['feed_url_prefix'] = "{{ old('feed_url_prefix') }}";
        formVals['title_match_rule_pattern'] = "{{ old('title_match_rule_pattern')|e('js') }}";
        formVals['title_match_index'] = "{{ old('title_match_index') }}";
        formVals['allow_historic_content'] = "{{ old('allow_historic_content') }}";
        if (formMode != 'add') {
            formVals['status'] = "{{ old('status') }}";
        }

    }

    if (formMode != 'add') {
        $('#status').val(formVals['status']);
    }
    $('#name').val(formVals['name']);
    $('#link_title').val(formVals['link_title']);
    $('#website_url').val(formVals['website_url']);
    $('#twitter_id').val(formVals['twitter_id']);
    $('#contact_name').val(formVals['contact_name']);
    $('#contact_email').val(formVals['contact_email']);
    $('#contact_form_link').val(formVals['contact_form_link']);
    $('#rating_scale').val(formVals['rating_scale']);
    $('#feed_url').val(formVals['feed_url']);
    $('#feed_url_prefix').val(formVals['feed_url_prefix']);
    $('#title_match_rule_pattern').val(formVals['title_match_rule_pattern']);
    $('#title_match_index').val(formVals['title_match_index']);
    if (formVals['allow_historic_content'] == '1') {
        $('#allow_historic_content').attr('checked', true);
    } else {
        $('#allow_historic_content').attr('checked', false);
    }

    $('#name').on('blur', function() {
        ssAdminTools.convertToLinkTitle('name', 'link_title');
    });

</script>
