{% extends 'theme/wos/base.twig' %}

{% set hideHeader = true %}

{% block page_body %}

<div class="row">
    <div class="col-xs-12 col-sm-4 col-md-4">

        <!-- Calendar -->
        <div class="row">
            <div class="col-md-4 text-center">
                <img src="/img/logo.png" style="height: 125px; width: 125px;" alt="World of Switch">
            </div>
            <div class="col-md-8 text-left">
                <h2>World of Switch</h2>
                <p><a href="{{ route('games.onSale') }}">Games on sale</a></p>
                <a class="twitter-share-button"
                   href="https://twitter.com/intent/tweet?text=World of Switch - Nintendo Switch games database&via=worldofswitch"
                   data-size="medium">
                    Tweet</a>
            </div>
        </div>

        <!-- Quick stats -->
        <div class="row">
            <div class="col-md-4 text-center">
                <h1><a href="{{ route('games.list.released') }}"><strong>{{ TotalReleasedGames }}</strong></a></h1>
                <p><a href="{{ route('games.list.released') }}">released games</a></p>
            </div>
            <div class="col-md-4 text-center">
                <h1><a href="{{ route('topRated.landing') }}"><strong>{{ TotalRanked }}</strong></a></h1>
                <p><a href="{{ route('topRated.landing') }}">ranked games</a></p>
            </div>
            <div class="col-md-4 text-center">
                <h1><a href="{{ route('reviews.landing') }}"><strong>{{ TotalReviews }}</strong></a></h1>
                <p><a href="{{ route('reviews.landing') }}">review scores</a></p>
            </div>
        </div>

        <!-- Latest reviews -->
        <h2>
            Latest reviews
        </h2>
        {% if ReviewList.count %}
            {% for item in ReviewList %}
                <p>
                    <strong>{{ item.review_date|date('jS M') }}</strong>:
                    <a href="{{ LinkHelper.gameShow(item.game) }}">{{ item.game.title }}</a>
                    <br>
                    <small>
                        Source: <a href="{{ route('reviews.site', {'linkTitle': item.site.link_title}) }}">{{ item.site.name }}</a>;
                        Rating: {{ item.rating_normalised }}
                    </small>
                </p>
            {% endfor %}
        {% else %}
            <p>No reviews to display.</p>
        {% endif %}

    </div>

    <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4" style="border-left: 1px solid #c9c9c9;">
        <h2>
            New releases
            <span class="h4">(<a href="{{ route('games.list.released') }}">more</a>)</span>
            <span class="h4">(<a href="{{ route('games.landing') }}">all games</a>)</span>
        </h2>
        {% if NewReleases|length %}
            <div class="row">
                {% for item in NewReleases %}
                    <div class="col-sm-6 col-md-6 col-lg-6" style="min-height: 160px; padding: 5px 2px; text-align: center;">
                        <a href="{{ LinkHelper.gameShow(item) }}">{{ ImageHelper.packshotHtml(item, 'landing-mini') }}</a>
                        <br>
                        <p class="h5">
                            <a href="{{ LinkHelper.gameShow(item) }}">{{ item.title }}</a>
                            <br>
                            <small>{{ item.release_date|date('jS M') }}</small>
                        </p>
                        <p class="h6">
                        </p>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>No games found!</p>
        {% endif %}
    </div>

    <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4" style="border-left: 1px solid #c9c9c9;">
        <h2>
            Best Switch games
            <span class="h4">(<a href="{{ route('topRated.allTime') }}">view all</a>)</span>
        </h2>
        {% if TopRatedAllTime|length %}
            <div class="row">
                {% for item in TopRatedAllTime %}
                    <div class="col-sm-6 col-md-6 col-lg-6" style="min-height: 160px; padding: 5px 2px; text-align: center;">
                        <a href="{{ LinkHelper.gameShow(item) }}">{{ ImageHelper.packshotHtml(item, 'landing-mini') }}</a>
                        <br>
                        <p class="h5">
                            <a href="{{ LinkHelper.gameShow(item) }}">{{ item.title }}</a>
                        </p>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>No games found!</p>
        {% endif %}
    </div>

    {#
    <div class="col-xs-12 col-sm-4 col-md-4">
    <h2>
        New releases
        <span class="h4">(<a href="{{ route('games.list.released') }}">more</a>)</span>
        <span class="h4">(<a href="{{ route('games.landing') }}">all games</a>)</span>
    </h2>
    {% if NewReleases.count %}
        <table class="table table-striped table-responsive">
            <thead>
            <tr>
                <th>Game</th>
                <th class="text-center">Release date</th>
            </tr>
            </thead>
            <tbody>
            {% for item in NewReleases %}
                <tr>
                    <td>
                        <a href="{{ LinkHelper.gameShow(item) }}">
                            {{ item.title }}
                        </a>
                    </td>
                    <td class="text-center">
                        {{ item.release_date|date('jS M') }}
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No games within this timeframe.</p>
    {% endif %}
    </div>
    #}


    {#
    <div class="col-xs-12 col-sm-4 col-md-4">
    <h2>
        Best Switch games
        <span class="h4">(<a href="{{ route('topRated.allTime') }}">view all</a>)</span>
    </h2>
    {% if TopRatedAllTime.count %}
        <p>
            Top rated Switch games of all-time.
        </p>
        {% include 'topRated/topRatedTable.twig' with {'topRatedList': TopRatedAllTime} %}
    {% else %}
        <p>Could not display Top rated.</p>
    {% endif %}
    </div>
    #}

</div>

{% endblock page_body %}
